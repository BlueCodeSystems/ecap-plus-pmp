"use strict";(self.webpackChunklightence_admin=self.webpackChunklightence_admin||[]).push([[7199],{17199(e,t,n){n.r(t),n.d(t,{default:()=>h});var a=n(65043),r=n(26486),i=n(30460),o=n(8387),l=n(45907),s=n(40854),c=n.n(s),d=n(70579);const h=()=>{const[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{s(!0);const e=await c().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});t(e.data.data)}catch(e){console.error("Error fetching user data:",e)}finally{s(!1),p(!1)}})()},[]);const u=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(l.A.Title,{level:4,children:[n?(0,d.jsx)(i.A.Input,{active:!0,size:"small"}):"".concat(null===e||void 0===e?void 0:e.location)," District Households Register"]}),(0,d.jsx)(o.A,{color:"volcano",children:"Note: Only active caregivers are shown."}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]});return(0,d.jsxs)(d.Fragment,{children:[u,h?(0,d.jsx)(i.A,{active:!0,paragraph:{rows:2}}):(0,d.jsx)(r.N,{})]})}},26486(e,t,n){n.d(t,{N:()=>T});var a,r=n(89379),i=n(57528),o=n(65043),l=n(19160),s=n(74684),c=n(49092),d=n(64435),h=n(40854),p=n.n(h),u=n(73216),g=n(89421),x=n(11645),m=n(25389),f=n(47419),y=n(36497),A=n(8387),v=n(35696),w=n(62058),j=n(16854),S=n.n(j),b=n(94574),C=n(43286),_=n(83722),E=n(70579);const k={current:1,pageSize:100},O={calhiv:"all",hei:"all",cwlhiv:"all",agyw:"all",csv:"all",cfsw:"all",abym:"all"},R=b.Ay.div(a||(a=(0,i.A)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 16px;\n"]))),D={calhiv:"CALHIV",hei:"HEI",cwlhiv:"CWLHIV",agyw:"AGYW",csv:"C/SV",cfsw:"CFSW",abym:"ABYM"},T=()=>{const[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)([]),[i,h]=(0,o.useState)({data:[],pagination:k,loading:!1}),{t:j}=(0,c.B)(),[b,T]=(0,o.useState)(""),[I,F]=(0,o.useState)(null),W=(0,u.Zp)(),N=(0,o.useRef)(null),[z,H]=(0,o.useState)(""),[L,P]=(0,o.useState)(""),[B,U]=(0,o.useState)(O),[K,V]=(0,o.useState)({});(0,o.useEffect)(()=>{(async()=>{try{const e=await p().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});F(e.data.data)}catch(e){console.error("Error fetching user data:",e)}})()},[]),(0,o.useEffect)(()=>{(async()=>{if(I)try{h(e=>(0,r.A)((0,r.A)({},e),{},{loading:!0}));const e=await p().get("https://ecapplus.server.dqa.bluecodeltd.com/household/all-households/".concat(null===I||void 0===I?void 0:I.location));t(e.data.data)}catch(e){console.error("Error fetching households data:",e)}finally{h(e=>(0,r.A)((0,r.A)({},e),{},{loading:!1}))}})()},[I]);const Y=(e,t,n)=>{t(),H(e[0]),P(n)};(0,o.useEffect)(()=>{const t=e.filter(e=>{const t=!b||Object.values(e).some(e=>e&&e.toString().toLowerCase().includes(b.toLowerCase())),n=Object.entries(B).every(t=>{let[n,a]=t;if("all"===a)return!0;const r=e[n];return"yes"===a?"1"===r||"true"===r:"0"===r||"false"===r});return t&&n});a(t)},[b,z,L,e,B]),(0,o.useEffect)(()=>{const e=n.map((e,t)=>({key:t,name:e.caregiver_name,age:0,address:"\n        Address: ".concat(e.homeaddress||"Not Applicable","\n        Facility: ").concat(e.facility||"Not Applicable","\n        Province: ").concat(e.province||"Not Applicable","\n        District: ").concat(e.district||"Not Applicable","\n        Ward: ").concat(e.ward||"Not Applicable","\n      "),household_id:e.household_id,caseworker_name:e.caseworker_name}));h({data:e,pagination:k,loading:!1})},[n,z]);const X=e=>({filterDropdown:t=>{let{setSelectedKeys:n,selectedKeys:a,confirm:i,clearFilters:o,close:l}=t;return(0,E.jsxs)("div",{style:{padding:8},children:[(0,E.jsx)(m.A,{ref:N,placeholder:"Search ".concat(e),value:a[0],onChange:e=>n(e.target.value?[e.target.value]:[]),onPressEnter:()=>{Y(a,i,e),V(t=>(0,r.A)((0,r.A)({},t),{},{[e]:a[0]||""}))},style:{marginBottom:8,display:"block"}}),(0,E.jsxs)(d.A,{children:[(0,E.jsx)(g.A,{type:"primary",onClick:()=>{Y(a,i,e),V(t=>(0,r.A)((0,r.A)({},t),{},{[e]:a[0]||""}))},icon:(0,E.jsx)(w.A,{}),size:"small",style:{width:95},children:"Search"}),(0,E.jsx)(g.A,{type:"primary",size:"small",onClick:()=>{o&&((e=>{e(),H("")})(o),H(""),P(""),V(t=>{const n=(0,r.A)({},t);return delete n[e],n}),i({closeDropdown:!1}))},style:{width:130},children:"Reset column"}),(0,E.jsx)(g.A,{type:"link",size:"small",onClick:l,children:"X"})]})]})},filterIcon:e=>(0,E.jsx)(w.A,{style:{color:e?"#1890ff":void 0}}),onFilter:(t,n)=>{const a=e in n?n[e]:"";return null!==a&&(!!a&&String(a).toLowerCase().includes(String(t).toLowerCase()))},render:(t,n)=>{const a=K[e]||"";if("address"===e){const e=["Address: ".concat(n.homeaddress),"Facility: ".concat(n.facility),"Province: ".concat(n.province),"District: ".concat(n.district),"Ward: ".concat(n.ward)];return(0,E.jsx)("div",{children:e.map((e,t)=>(0,E.jsx)("div",{children:a?(0,E.jsx)(S(),{highlightStyle:{backgroundColor:"#FFC069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:e}):e},t))})}return a?(0,E.jsx)(S(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}),G=[(0,r.A)({title:j("Household ID"),dataIndex:"household_id",width:"15%"},X("household_id")),(0,r.A)({title:j("Caregiver Name"),dataIndex:"name",width:"15%"},X("name")),(0,r.A)((0,r.A)({title:j("Household Details"),dataIndex:"address",width:"30%"},X("address")),{},{render:e=>(0,E.jsxs)("div",{style:{whiteSpace:"pre-line"},children:[" ",e," "]})}),(0,r.A)({title:j("Case Worker"),dataIndex:"caseworker_name",width:"15%"},X("caseworker_name")),{title:j("Applied Filters & Search"),dataIndex:"appliedFilters",width:"20%",render:()=>{const e=[...Object.entries(B).filter(e=>{let[,t]=e;return"all"!==t}).map(e=>{let[t]=e;return D[t]}),...Object.entries(K).filter(e=>{let[,t]=e;return""!==t}).map(e=>{let[t,n]=e;return"".concat(n)})];return(0,E.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:e.map((e,t)=>(0,E.jsx)(A.A,{color:"cyan",children:e},t))})}},{title:j("Actions"),width:"10%",render:(e,t)=>(0,E.jsx)(d.A,{children:(0,E.jsx)(s.S,{type:"primary",onClick:()=>M(t.household_id),children:j("View")})})}],M=t=>{const n=e.find(e=>e.household_id===t);W("/profile/household-profile/".concat(encodeURIComponent(t)),{state:{household:n}})};return(0,E.jsxs)("div",{children:[(0,E.jsxs)(f.A,{justify:"space-between",align:"middle",style:{marginBottom:"16px"},children:[(0,E.jsx)(x.A,{children:(0,E.jsx)(v.A,{title:j("You can search by Household ID, Caregiver Name, Caseworker Name, and other fields."),children:(0,E.jsx)(C.DO,{placeholder:j("Global Search"),value:b,onChange:e=>T(e.target.value),style:{marginRight:"16px"}})})}),(0,E.jsxs)(x.A,{span:24,children:[(0,E.jsxs)("h5",{style:{fontSize:"20px",margin:"16px 16px 8px 0"},children:[" ",j("Filter by Sub Population")," "]}),(0,E.jsx)(f.A,{align:"middle",style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:Object.entries(D).map(e=>{let[t,n]=e;return(0,E.jsxs)("div",{style:{marginRight:"16px",marginBottom:"1px",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,E.jsxs)("span",{style:{fontSize:"12px"},children:[" ",n," "]}),(0,E.jsxs)(y.A,{style:{width:"100px"},value:B[t],onChange:e=>{return n=t,a=e,void U(e=>(0,r.A)((0,r.A)({},e),{},{[n]:a}));var n,a},children:[(0,E.jsxs)(y.A.Option,{value:"all",children:[" ",j("All")," "]}),(0,E.jsxs)(y.A.Option,{value:"yes",children:[" ",j("Yes")," "]}),(0,E.jsxs)(y.A.Option,{value:"no",children:[" ",j("No")," "]})]})]},t)})})]}),(0,E.jsx)(x.A,{children:(0,E.jsx)(R,{children:(0,E.jsxs)(d.A,{style:{marginTop:"20px"},children:[(0,E.jsx)(g.A,{type:"primary",onClick:()=>{H(""),T(""),P(""),U(O)},children:j("Clear Filters")}),(0,E.jsx)(g.A,{type:"primary",onClick:()=>{try{const e=(new _.iX).parse(n),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="households_data.csv",a.click()}catch(e){console.error("Error exporting data:",e)}},children:j("Export to CSV")})]})})})]}),(0,E.jsx)(l.W,{columns:G,dataSource:i.data,scroll:{x:1e3},pagination:i.pagination,loading:i.loading,style:{overflowX:"auto"},onChange:e=>{h(t=>(0,r.A)((0,r.A)({},t),{},{pagination:e}))}})]})}},43286(e,t,n){n.d(t,{$x:()=>p,DO:()=>u});var a,r,i,o,l=n(57528),s=n(94574),c=n(62791),d=n(62058),h=n(64435);const p=(0,s.Ay)(h.A)(a||(a=(0,l.A)(["\n  & > .ant-space-item:last-of-type {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),u=((0,s.Ay)(d.A)(r||(r=(0,l.A)(["\n  font-size: 1.25rem;\n  color: #666;\n\n  @media only screen and (min-width: 768px) {\n    font-size: 1.5rem;\n  }\n"]))),s.Ay.button(i||(i=(0,l.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: #999;\n  font-size: 1rem;\n  margin-left: 0.5rem;\n  display: flex; /* Ensure it aligns properly with the input */\n  align-items: center;\n  height: 100%; /* Match the height of the input */\n  padding: 0; /* Remove extra padding */\n\n  &:hover {\n    color: #333;\n  }\n"]))),(0,s.Ay)(c.a.Search)(o||(o=(0,l.A)(["\n  border: 2px solid #c6d9eb;\n  border-radius: 1.5rem;\n  background: #ffffff;\n  padding: 0.5rem 1rem;\n  width: 100%; /* Default to 100% width for mobile devices */\n  max-width: 450px; /* Set a maximum width */\n  margin: 0 auto; /* Center horizontally */\n  box-shadow: none; /* Remove box shadow to avoid enlarging effect */\n  display: flex; /* Use flex to align items properly */\n\n  &:focus {\n    border-color: #a2b8d7;\n    outline: none;\n  }\n\n  .ant-input-prefix {\n    margin-right: 0.5rem;\n  }\n\n  .ant-input-group-addon {\n    display: none;\n  }\n\n  input {\n    height: auto;\n    padding: 0.5rem;\n    border: none;\n    outline: none;\n    background: transparent;\n    font-weight: bold;\n    font-size: 14px; /* Slightly increased font size for better readability */\n    color: #333;\n  }\n\n  .clear-button {\n    display: flex;\n    align-items: center;\n    margin-left: 0; /* Remove margin if not needed */\n  }\n\n  @media only screen and (min-width: 576px) {\n    width: 75%; /* Adjust width for small tablets */\n  }\n\n  @media only screen and (min-width: 768px) {\n    width: 50%; /* Adjust width for tablets */\n  }\n\n  @media only screen and (min-width: 992px) {\n    width: 450px; /* Use the fixed width for larger screens */\n  }\n"]))))}}]);
//# sourceMappingURL=7199.6960685c.chunk.js.map