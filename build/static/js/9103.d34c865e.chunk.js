"use strict";(self.webpackChunklightence_admin=self.webpackChunklightence_admin||[]).push([[9103],{8387(e,t,o){o.d(t,{A:()=>b});var a=o(64467),c=o(58168),n=o(5544),r=o(53727),l=o(98139),i=o.n(l),s=o(18574),d=o(65043),u=o(35296),p=o(11128),m=o(16021),f=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]])}return o};const g=function(e){var t=e.prefixCls,o=e.className,n=e.checked,r=e.onChange,l=e.onClick,s=f(e,["prefixCls","className","checked","onChange","onClick"]),p=(0,d.useContext(u.QO).getPrefixCls)("tag",t),m=i()(p,(0,a.A)((0,a.A)({},"".concat(p,"-checkable"),!0),"".concat(p,"-checkable-checked"),n),o);return d.createElement("span",(0,c.A)({},s,{className:m,onClick:function(e){null===r||void 0===r||r(!n),null===l||void 0===l||l(e)}}))};var h=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]])}return o},y=new RegExp("^(".concat(p.w.join("|"),")(-inverse)?$")),C=new RegExp("^(".concat(p.C.join("|"),")$")),v=function(e,t){var o=e.prefixCls,l=e.className,p=e.style,f=e.children,g=e.icon,v=e.color,x=e.onClose,b=e.closeIcon,k=e.closable,A=void 0!==k&&k,_=h(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),E=d.useContext(u.QO),O=E.getPrefixCls,S=E.direction,w=d.useState(!0),I=(0,n.A)(w,2),j=I[0],P=I[1];d.useEffect(function(){"visible"in _&&P(_.visible)},[_.visible]);var N=function(){return!!v&&(y.test(v)||C.test(v))},R=(0,c.A)({backgroundColor:v&&!N()?v:void 0},p),F=N(),T=O("tag",o),D=i()(T,(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},"".concat(T,"-").concat(v),F),"".concat(T,"-has-color"),v&&!F),"".concat(T,"-hidden"),!j),"".concat(T,"-rtl"),"rtl"===S),l),U=function(e){e.stopPropagation(),null===x||void 0===x||x(e),e.defaultPrevented||"visible"in _||P(!1)},B="onClick"in _||f&&"a"===f.type,H=(0,s.A)(_,["visible"]),K=g||null,L=K?d.createElement(d.Fragment,null,K,d.createElement("span",null,f)):f,V=d.createElement("span",(0,c.A)({},H,{ref:t,className:D,style:R}),L,A?b?d.createElement("span",{className:"".concat(T,"-close-icon"),onClick:U},b):d.createElement(r.A,{className:"".concat(T,"-close-icon"),onClick:U}):null);return B?d.createElement(m.A,null,V):V},x=d.forwardRef(v);x.CheckableTag=g;const b=x},9103(e,t,o){o.r(t),o.d(t,{default:()=>h});var a=o(65043),c=o(44394),n=o(89421),r=o(48193),l=o(30460),i=o(75356),s=o(8387),d=o(45907),u=o(40854),p=o.n(u),m=o(73216),f=o(58709),g=o(70579);const h=()=>{const[e,t]=(0,a.useState)(!0),[o,u]=(0,a.useState)([]),[h,y]=(0,a.useState)(null),C=(0,m.Zp)();(0,a.useEffect)(()=>{console.log("Fetching records...");(async()=>{try{t(!0);const e=await p().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/items/flagged_forms_ecapplus_pmp"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});console.log("Records fetched:",e.data.data),u(e.data.data)}catch(e){console.error("Error fetching table data:",e),y("Failed to fetch table data.")}finally{t(!1)}})()},[]);const v=[{title:"Household ID",dataIndex:"household_id",key:"household_id"},{title:"Caseworker Name",dataIndex:"caseworker_name",key:"caseworker_name"},{title:"Caregiver Name",dataIndex:"caregiver_name",key:"caregiver_name"},{title:"Facility",dataIndex:"facility",key:"facility"},{title:"Comment",dataIndex:"comment",key:"comment"},{title:"Verifier",dataIndex:"verifier",key:"verifier"},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,g.jsx)(s.A,{color:"Pending"===e?"orange":"Approved"===e?"green":"red",children:e.toUpperCase()})},{title:"Created At",dataIndex:"date_created",key:"date_created",render:e=>{if(e){return(0,f.p5)(e).toLocaleDateString()}return"Not Applicable"}}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A.Title,{level:4,children:"District Flagged Records"}),h&&(0,g.jsx)(c.A,{message:"Error",description:h,type:"error",showIcon:!0,style:{marginBottom:"20px"}}),(0,g.jsx)(n.A,{type:"primary",onClick:()=>{console.log("Exporting records...");try{const e="data:text/csv;charset=utf-8,"+["Household ID,Caseworker Name,Caregiver Name,Facility,Comment,Verifier,Status,Created At"].concat(o.map(e=>"".concat(e.household_id,",").concat(e.caseworker_name,",").concat(e.caregiver_name,",").concat(e.facility,",").concat(e.comment,",").concat(e.verifier,",").concat(e.status,",").concat(e.date_created))).join("\n"),t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","district_flagged_records.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),r.Ay.success("Exported successfully!"),console.log("Export successful!")}catch(h){console.error("Error exporting data:",h),r.Ay.error("Failed to export records.")}},style:{marginBottom:"20px"},children:"Export to CSV"}),e?(0,g.jsx)(l.A,{active:!0,paragraph:{rows:3}}):(0,g.jsx)(i.A,{scroll:{x:500},dataSource:o,columns:v,rowKey:"id",pagination:{pageSize:10},onRow:e=>({onClick:()=>{C("/profile/household-profile/".concat(encodeURIComponent(e.household_id)),{state:{household:e}})},style:{cursor:"pointer"}})})]})}}}]);
//# sourceMappingURL=9103.d34c865e.chunk.js.map