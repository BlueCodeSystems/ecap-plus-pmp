"use strict";(self.webpackChunklightence_admin=self.webpackChunklightence_admin||[]).push([[9467],{62459(t,e,n){n.d(e,{T5:()=>b,sx:()=>E});var o=n(65043);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){for(;t;){if(t.classList&&t.classList.contains(e))return!0;t=t.parentElement}return!1}function h(t){var e=t.getBoundingClientRect();return{x:e.left,y:e.top}}function c(t,e,n){return"https://tile.openstreetmap.org/"+n+"/"+t+"/"+e+".png"}var m=function(){return!0},p=function(t,e){return(t+180)/360*Math.pow(2,e)},d=function(t,e){return(1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e)};function f(t,e){return t/Math.pow(2,e)*360-180}function v(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function g(t,e){var n=h(t);return[e.clientX-n.x,e.clientY-n.y]}var _=[v(Math.pow(2,10),10),v(0,10),f(0,10),f(Math.pow(2,10),10)],w="undefined"!==typeof window,M=w&&window.performance&&window.performance.now?function(){return window.performance.now()}:function(){var t=(new Date).getTime();return function(){return(new Date).getTime()-t}}(),x=function(t){return w?(window.requestAnimationFrame||window.setTimeout)(t):(t((new Date).getTime()),null)},T=function(t){return!(!w||!t)&&(window.cancelAnimationFrame||window.clearTimeout)(t)};function S(t,e,n,o,a){return t&&0!==t.length?t.map(function(t){return e(n,o,a,t)+(1===t?"":" "+t+"x")}).join(", "):""}var b=function(t){var e,n;function a(e){var n,o,a,r,s,h,c,w,S;return i(l(S=t.call(this,e)||this),"_containerRef",void 0),i(l(S),"_mousePosition",void 0),i(l(S),"_loadTracker",void 0),i(l(S),"_dragStart",null),i(l(S),"_mouseDown",!1),i(l(S),"_moveEvents",[]),i(l(S),"_lastClick",null),i(l(S),"_lastTap",null),i(l(S),"_lastWheel",null),i(l(S),"_touchStartPixel",null),i(l(S),"_touchStartMidPoint",null),i(l(S),"_touchStartDistance",null),i(l(S),"_secondTouchEnd",null),i(l(S),"_warningClearTimeout",null),i(l(S),"_isAnimating",!1),i(l(S),"_animationStart",null),i(l(S),"_animationEnd",null),i(l(S),"_zoomStart",null),i(l(S),"_centerTarget",null),i(l(S),"_zoomTarget",null),i(l(S),"_zoomAround",null),i(l(S),"_animFrame",null),i(l(S),"_boundsSynced",!1),i(l(S),"_minMaxCache",null),i(l(S),"_lastZoom",void 0),i(l(S),"_lastCenter",void 0),i(l(S),"_centerStart",void 0),i(l(S),"_resizeObserver",null),i(l(S),"updateWidthHeight",function(){if(S._containerRef){var t=S._containerRef.getBoundingClientRect();if(t&&t.width>0&&t.height>0)return S.setState({width:t.width,height:t.height}),!0}return!1}),i(l(S),"wa",function(){var t;return(t=window).addEventListener.apply(t,arguments)}),i(l(S),"wr",function(){var t;return(t=window).removeEventListener.apply(t,arguments)}),i(l(S),"bindMouseEvents",function(){S.wa("mousedown",S.handleMouseDown),S.wa("mouseup",S.handleMouseUp),S.wa("mousemove",S.handleMouseMove)}),i(l(S),"bindTouchEvents",function(){S.wa("touchstart",S.handleTouchStart,{passive:!1}),S.wa("touchmove",S.handleTouchMove,{passive:!1}),S.wa("touchend",S.handleTouchEnd,{passive:!1})}),i(l(S),"unbindMouseEvents",function(){S.wr("mousedown",S.handleMouseDown),S.wr("mouseup",S.handleMouseUp),S.wr("mousemove",S.handleMouseMove)}),i(l(S),"unbindTouchEvents",function(){S.wr("touchstart",S.handleTouchStart),S.wr("touchmove",S.handleTouchMove),S.wr("touchend",S.handleTouchEnd)}),i(l(S),"bindResizeEvent",function(){S.wa("resize",S.updateWidthHeight)}),i(l(S),"unbindResizeEvent",function(){S.wr("resize",S.updateWidthHeight)}),i(l(S),"bindWheelEvent",function(){S._containerRef&&S._containerRef.addEventListener("wheel",S.handleWheel,{passive:!1})}),i(l(S),"unbindWheelEvent",function(){S._containerRef&&S._containerRef.removeEventListener("wheel",S.handleWheel)}),i(l(S),"setCenterZoomTarget",function(t,e,n,o,a){if(void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=300),S.props.animate&&(!n||S.distanceInScreens(t,e,S.state.center,S.state.zoom)<=S.props.animateMaxScreens)){if(S._isAnimating){T(S._animFrame);var r=S.animationStep(M()),i=r.centerStep,s=r.zoomStep;S._centerStart=i,S._zoomStart=s}else S._isAnimating=!0,S._centerStart=S.limitCenterAtZoom([S._lastCenter[0],S._lastCenter[1]],S._lastZoom),S._zoomStart=S._lastZoom,S.onAnimationStart();S._animationStart=M(),S._animationEnd=S._animationStart+a,o?(S._zoomAround=o,S._centerTarget=S.calculateZoomCenter(S._lastCenter,o,S._lastZoom,e)):(S._zoomAround=null,S._centerTarget=t),S._zoomTarget=e,S._animFrame=x(S.animate)}else if(S.stopAnimating(),o){var l=S.calculateZoomCenter(S._lastCenter,o,S._lastZoom,e);S.setCenterZoom(l,e,n)}else S.setCenterZoom(t||S.state.center,e,n)}),i(l(S),"setCenterZoomForChildren",function(t,e){S.setCenterZoomTarget(t||S.state.center,e||S.state.zoom,!0)}),i(l(S),"distanceInScreens",function(t,e,n,o){var a=S.state,r=a.width,i=a.height,s=S.latLngToPixel(n,n,o),l=S.latLngToPixel(t,n,o),u=S.latLngToPixel(n,n,e),h=S.latLngToPixel(t,n,e),c=(Math.abs(s[0]-l[0])+Math.abs(u[0]-h[0]))/2/r,m=(Math.abs(s[1]-l[1])+Math.abs(u[1]-h[1]))/2/i;return Math.sqrt(c*c+m*m)}),i(l(S),"animationStep",function(t){if(!S._animationEnd||!S._animationStart||!S._zoomTarget||!S._zoomStart||!S._centerStart||!S._centerTarget)return{centerStep:S.state.center,zoomStep:S.state.zoom};var e,n=S._animationEnd-S._animationStart,o=Math.max(t-S._animationStart,0),a=(e=o/n)*(2-e),r=(S._zoomTarget-S._zoomStart)*a,i=S._zoomStart+r;return S._zoomAround?{centerStep:S.calculateZoomCenter(S._centerStart,S._zoomAround,S._zoomStart,i),zoomStep:i}:{centerStep:[S._centerStart[0]+(S._centerTarget[0]-S._centerStart[0])*a,S._centerStart[1]+(S._centerTarget[1]-S._centerStart[1])*a],zoomStep:i}}),i(l(S),"animate",function(t){if(!S._animationEnd||t>=S._animationEnd)S._isAnimating=!1,S.setCenterZoom(S._centerTarget,S._zoomTarget,!0),S.onAnimationStop();else{var e=S.animationStep(t),n=e.centerStep,o=e.zoomStep;S.setCenterZoom(n,o),S._animFrame=x(S.animate)}}),i(l(S),"stopAnimating",function(){S._isAnimating&&(S._isAnimating=!1,S.onAnimationStop(),T(S._animFrame))}),i(l(S),"limitCenterAtZoom",function(t,e){var n=S.getBoundsMinMax(e||S.state.zoom);return[Math.max(Math.min(!t||isNaN(t[0])?S.state.center[0]:t[0],n[1]),n[0]),Math.max(Math.min(!t||isNaN(t[1])?S.state.center[1]:t[1],n[3]),n[2])]}),i(l(S),"onAnimationStart",function(){S.props.onAnimationStart&&S.props.onAnimationStart()}),i(l(S),"onAnimationStop",function(){S.props.onAnimationStop&&S.props.onAnimationStop()}),i(l(S),"setCenterZoom",function(t,e,n){void 0===n&&(n=!1);var o=S.limitCenterAtZoom(t,e);if(e&&Math.round(S.state.zoom)!==Math.round(e)){var a=S.tileValues(S.state),r=S.tileValues({center:o,zoom:e,width:S.state.width,height:S.state.height}),i=S.state.oldTiles;S.setState({oldTiles:i.filter(function(t){return t.roundedZoom!==a.roundedZoom}).concat(a)},m);for(var s={},l=r.tileMinX;l<=r.tileMaxX;l++)for(var u=r.tileMinY;u<=r.tileMaxY;u++){s[l+"-"+u+"-"+r.roundedZoom]=!1}S._loadTracker=s}S.setState({center:o,zoom:e||S.state.zoom},m);var h=S.props.zoom?S.props.zoom:S._lastZoom,c=S.props.center?S.props.center:S._lastCenter;e&&(n||Math.abs(h-e)>.001||Math.abs(c[0]-o[0])>1e-5||Math.abs(c[1]-o[1])>1e-5)&&(S._lastZoom=e,S._lastCenter=[].concat(o),S.syncToProps(o,e))}),i(l(S),"getBoundsMinMax",function(t){if("center"===S.props.limitBounds)return _;var e=S.state,n=e.width,o=e.height;if(S._minMaxCache&&S._minMaxCache[0]===t&&S._minMaxCache[1]===n&&S._minMaxCache[2]===o)return S._minMaxCache[3];var a=256*Math.pow(2,t),r=n>a?0:f(n/512,t),i=o>a?0:v(Math.pow(2,t)-o/512,t),s=n>a?0:f(Math.pow(2,t)-n/512,t),l=[i,o>a?0:v(o/512,t),r,s];return S._minMaxCache=[t,n,o,l],l}),i(l(S),"tileLoaded",function(t){S._loadTracker&&t in S._loadTracker&&(S._loadTracker[t]=!0,0===Object.values(S._loadTracker).filter(function(t){return!t}).length&&S.setState({oldTiles:[]},m))}),i(l(S),"handleTouchStart",function(t){if(S._containerRef&&(!t.target||!u(t.target,"pigeon-drag-block")))if(1===t.touches.length){var e=t.touches[0],n=g(S._containerRef,e);if(S.coordsInside(n)&&(S._touchStartPixel=[n],!S.props.twoFingerDrag))if(S.stopAnimating(),S._lastTap&&M()-S._lastTap<300){t.preventDefault();var o=S.pixelToLatLng(S._touchStartPixel[0]);S.setCenterZoomTarget(null,Math.max(S.props.minZoom,Math.min(S.state.zoom+1,S.props.maxZoom)),!1,o)}else S._lastTap=M(),S.trackMoveEvents(n)}else if(2===t.touches.length&&S._touchStartPixel){t.preventDefault(),S.stopTrackingMoveEvents(),(S.state.pixelDelta||S.state.zoomDelta)&&S.sendDeltaChange();var a=g(S._containerRef,t.touches[0]),r=g(S._containerRef,t.touches[1]);S._touchStartPixel=[a,r],S._touchStartMidPoint=[(a[0]+r[0])/2,(a[1]+r[1])/2],S._touchStartDistance=Math.sqrt(Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2))}}),i(l(S),"handleTouchMove",function(t){if(S._containerRef){if(1===t.touches.length&&S._touchStartPixel){var e=t.touches[0],n=g(S._containerRef,e);S.props.twoFingerDrag?S.coordsInside(n)&&S.showWarning("fingers"):(t.preventDefault(),S.trackMoveEvents(n),S.setState({pixelDelta:[n[0]-S._touchStartPixel[0][0],n[1]-S._touchStartPixel[0][1]]},m))}else if(2===t.touches.length&&S._touchStartPixel&&S._touchStartMidPoint&&S._touchStartDistance){var o=S.state,a=o.width,r=o.height,i=o.zoom;t.preventDefault();var s=g(S._containerRef,t.touches[0]),l=g(S._containerRef,t.touches[1]),u=[(s[0]+l[0])/2,(s[1]+l[1])/2],h=[u[0]-S._touchStartMidPoint[0],u[1]-S._touchStartMidPoint[1]],c=Math.sqrt(Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2)),p=Math.max(S.props.minZoom,Math.min(S.props.maxZoom,i+Math.log2(c/S._touchStartDistance)))-i,d=Math.pow(2,p),f=[(a/2-u[0])*(d-1),(r/2-u[1])*(d-1)];S.setState({zoomDelta:p,pixelDelta:[f[0]+h[0]*d,f[1]+h[1]*d]},m)}}else S._touchStartPixel=null}),i(l(S),"handleTouchEnd",function(t){if(S._containerRef){if(S._touchStartPixel){var e=S.props,n=e.zoomSnap,o=e.twoFingerDrag,a=e.minZoom,r=e.maxZoom,i=S.state.zoomDelta,s=S.sendDeltaChange(),l=s.center,u=s.zoom;if(0===t.touches.length)if(o)S.clearWarning();else{var h=S._touchStartPixel[0],c=g(S._containerRef,t.changedTouches[0]);(Math.abs(h[0]-c[0])>2||Math.abs(h[1]-c[1])>2)&&(!S._secondTouchEnd||M()-S._secondTouchEnd>300)&&(t.preventDefault(),S.throwAfterMoving(c,l,u)),S._touchStartPixel=null,S._secondTouchEnd=null}else if(1===t.touches.length){t.preventDefault();var m=g(S._containerRef,t.touches[0]);if(S._secondTouchEnd=M(),S._touchStartPixel=[m],S.trackMoveEvents(m),n){var p,d=S._touchStartMidPoint?S.pixelToLatLng(S._touchStartMidPoint):S.state.center;p=o&&Math.round(S.state.zoom)===Math.round(S.state.zoom+i)?Math.round(S.state.zoom):i>0?Math.ceil(S.state.zoom):Math.floor(S.state.zoom);var f=Math.max(a,Math.min(p,r));S.setCenterZoomTarget(d,f,!1,d)}}}}else S._touchStartPixel=null}),i(l(S),"handleMouseDown",function(t){if(S._containerRef){var e=g(S._containerRef,t);if(0===t.button&&(!t.target||!u(t.target,"pigeon-drag-block"))&&S.coordsInside(e))if(S.stopAnimating(),t.preventDefault(),S._lastClick&&M()-S._lastClick<300){if(!u(t.target,"pigeon-click-block")){var n=S.pixelToLatLng(S._mousePosition||e);S.setCenterZoomTarget(null,Math.max(S.props.minZoom,Math.min(S.state.zoom+1,S.props.maxZoom)),!1,n)}}else S._lastClick=M(),S._mouseDown=!0,S._dragStart=e,S.trackMoveEvents(e)}}),i(l(S),"handleMouseMove",function(t){S._containerRef&&(S._mousePosition=g(S._containerRef,t),S._mouseDown&&S._dragStart&&(S.trackMoveEvents(S._mousePosition),S.setState({pixelDelta:[S._mousePosition[0]-S._dragStart[0],S._mousePosition[1]-S._dragStart[1]]},m)))}),i(l(S),"handleMouseUp",function(t){if(S._containerRef){var e=S.state.pixelDelta;if(S._mouseDown){S._mouseDown=!1;var n=g(S._containerRef,t);if(!S.props.onClick||t.target&&u(t.target,"pigeon-click-block")||e&&!(Math.abs(e[0])+Math.abs(e[1])<=2)){var o=S.sendDeltaChange(),a=o.center,r=o.zoom;S.throwAfterMoving(n,a,r)}else{var i=S.pixelToLatLng(n);S.props.onClick({event:t,latLng:i,pixel:n}),S.setState({pixelDelta:void 0},m)}}}else S._mouseDown=!1}),i(l(S),"stopTrackingMoveEvents",function(){S._moveEvents=[]}),i(l(S),"trackMoveEvents",function(t){var e=M();(0===S._moveEvents.length||e-S._moveEvents[S._moveEvents.length-1].timestamp>40)&&(S._moveEvents.push({timestamp:e,coords:t}),S._moveEvents.length>2&&S._moveEvents.shift())}),i(l(S),"throwAfterMoving",function(t,e,n){var o=S.state,a=o.width,r=o.height,i=S.props.animate,s=M(),l=S._moveEvents.shift();if(l&&i){var u=Math.max(s-l.timestamp,1),h=[(t[0]-l.coords[0])/u*120,(t[1]-l.coords[1])/u*120],c=Math.sqrt(h[0]*h[0]+h[1]*h[1]);if(c>40){var m=1500*c/Math.sqrt(a*a+r*r),g=f(p(e[1],n)-h[0]/256,n),_=v(d(e[0],n)-h[1]/256,n);S.setCenterZoomTarget([_,g],n,!1,null,m)}}S.stopTrackingMoveEvents()}),i(l(S),"sendDeltaChange",function(){var t=S.state,e=t.center,n=t.zoom,o=t.pixelDelta,a=t.zoomDelta,r=e[0],i=e[1];return(o||0!==a)&&(i=f(p(e[1],n+a)-(o?o[0]/256:0),n+a),r=v(d(e[0],n+a)-(o?o[1]/256:0),n+a),S.setCenterZoom([r,i],n+a)),S.setState({pixelDelta:void 0,zoomDelta:0},m),{center:S.limitCenterAtZoom([r,i],n+a),zoom:n+a}}),i(l(S),"getBounds",function(t,e){void 0===t&&(t=S.state.center),void 0===e&&(e=S.zoomPlusDelta());var n=S.state,o=n.width,a=n.height;return{ne:S.pixelToLatLng([o-1,0],t,e),sw:S.pixelToLatLng([0,a-1],t,e)}}),i(l(S),"syncToProps",function(t,e){void 0===t&&(t=S.state.center),void 0===e&&(e=S.state.zoom);var n=S.props.onBoundsChanged;n&&(n({center:t,zoom:e,bounds:S.getBounds(t,e),initial:!S._boundsSynced}),S._boundsSynced=!0)}),i(l(S),"handleWheel",function(t){var e=S.props,n=e.mouseEvents,o=e.metaWheelZoom,a=e.zoomSnap,r=e.animate;if(n)if(!o||t.metaKey||t.ctrlKey){t.preventDefault();var i=-t.deltaY/150;if(!a&&S._zoomTarget){var s=S._zoomTarget-S.state.zoom;S.zoomAroundMouse(i+s,t)}else r?S.zoomAroundMouse(i,t):(!S._lastWheel||M()-S._lastWheel>300)&&(S._lastWheel=M(),S.zoomAroundMouse(i,t))}else S.showWarning("wheel")}),i(l(S),"showWarning",function(t){S.state.showWarning&&S.state.warningType===t||S.setState({showWarning:!0,warningType:t}),S._warningClearTimeout&&window.clearTimeout(S._warningClearTimeout),S._warningClearTimeout=window.setTimeout(S.clearWarning,300)}),i(l(S),"clearWarning",function(){S.state.showWarning&&S.setState({showWarning:!1})}),i(l(S),"zoomAroundMouse",function(t,e){if(S._containerRef){var n=S.state.zoom,o=S.props,a=o.minZoom,r=o.maxZoom,i=o.zoomSnap;if(S._mousePosition=g(S._containerRef,e),!(!S._mousePosition||n===a&&t<0||n===r&&t>0)){var s=S.pixelToLatLng(S._mousePosition),l=n+t;i&&(l=t<0?Math.floor(l):Math.ceil(l)),l=Math.max(a,Math.min(l,r)),S.setCenterZoomTarget(null,l,!1,s)}}}),i(l(S),"zoomPlusDelta",function(){return S.state.zoom+S.state.zoomDelta}),i(l(S),"pixelToLatLng",function(t,e,n){void 0===e&&(e=S.state.center),void 0===n&&(n=S.zoomPlusDelta());var o=S.state,a=o.width,r=o.height,i=o.pixelDelta,s=[(t[0]-a/2-(i?i[0]:0))/256,(t[1]-r/2-(i?i[1]:0))/256],l=p(e[1],n)+s[0],u=d(e[0],n)+s[1];return[Math.max(_[0],Math.min(_[1],v(u,n))),Math.max(_[2],Math.min(_[3],f(l,n)))]}),i(l(S),"latLngToPixel",function(t,e,n){void 0===e&&(e=S.state.center),void 0===n&&(n=S.zoomPlusDelta());var o=S.state,a=o.width,r=o.height,i=o.pixelDelta,s=p(e[1],n),l=d(e[0],n),u=p(t[1],n),h=d(t[0],n);return[256*(u-s)+a/2+(i?i[0]:0),256*(h-l)+r/2+(i?i[1]:0)]}),i(l(S),"calculateZoomCenter",function(t,e,n,o){var a=S.state,r=a.width,i=a.height,s=S.latLngToPixel(e,t,n),l=S.latLngToPixel(e,t,o),u=S.pixelToLatLng([r/2+l[0]-s[0],i/2+l[1]-s[1]],t,o);return S.limitCenterAtZoom(u,o)}),i(l(S),"setRef",function(t){S._containerRef=t}),S.syncToProps=function(t,e){var n;return function(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];var i=this;clearTimeout(n),n=setTimeout(function(){return t.apply(i,a)},e)}}(S.syncToProps,60),S._lastZoom=null!==(n=null!==(o=e.defaultZoom)&&void 0!==o?o:e.zoom)&&void 0!==n?n:14,S._lastCenter=null!==(a=null!==(r=e.defaultCenter)&&void 0!==r?r:e.center)&&void 0!==a?a:[0,0],S.state={zoom:S._lastZoom,center:S._lastCenter,width:null!==(s=null!==(h=e.width)&&void 0!==h?h:e.defaultWidth)&&void 0!==s?s:-1,height:null!==(c=null!==(w=e.height)&&void 0!==w?w:e.defaultHeight)&&void 0!==c?c:-1,zoomDelta:0,pixelDelta:void 0,oldTiles:[],showWarning:!1,warningType:void 0},S}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var r=a.prototype;return r.componentDidMount=function(){var t=this;this.props.mouseEvents&&this.bindMouseEvents(),this.props.touchEvents&&this.bindTouchEvents(),this.props.width&&this.props.height||(this.updateWidthHeight()||x(this.updateWidthHeight),this.bindResizeEvent()),this.bindWheelEvent(),this.syncToProps(),"undefined"!==typeof window.ResizeObserver&&(this._resizeObserver=new window.ResizeObserver(function(){t.updateWidthHeight()}),this._resizeObserver.observe(this._containerRef))},r.componentWillUnmount=function(){this.props.mouseEvents&&this.unbindMouseEvents(),this.props.touchEvents&&this.unbindTouchEvents(),this.unbindWheelEvent(),this.props.width&&this.props.height||this.unbindResizeEvent(),this._resizeObserver&&this._resizeObserver.disconnect()},r.componentDidUpdate=function(t){var e;if(this.props.mouseEvents!==t.mouseEvents&&(this.props.mouseEvents?this.bindMouseEvents():this.unbindMouseEvents()),this.props.touchEvents!==t.touchEvents&&(this.props.touchEvents?this.bindTouchEvents():this.unbindTouchEvents()),this.props.width&&this.props.width!==t.width&&this.setState({width:this.props.width}),this.props.height&&this.props.height!==t.height&&this.setState({height:this.props.height}),(this.props.center||this.props.zoom)&&(this.props.center&&(this.props.center[0]!==(null===t||void 0===t||null===(e=t.center)||void 0===e?void 0:e[0])||this.props.center[1]!==t.center[1])||this.props.zoom!==t.zoom)){var n=this._isAnimating?this._centerTarget:this.state.center,o=this._isAnimating?this._zoomTarget:this.state.zoom;if(n&&o){var a,r,i=null!==(a=this.props.center)&&void 0!==a?a:n,s=null!==(r=this.props.zoom)&&void 0!==r?r:o;(Math.abs(s-o)>.001||Math.abs(i[0]-n[0])>1e-4||Math.abs(i[1]-n[1])>1e-4)&&this.setCenterZoomTarget(i,s,!0)}}},r.coordsInside=function(t){var e=this.state,n=e.width,o=e.height;if(t[0]<0||t[1]<0||t[0]>=n||t[1]>=o)return!1;var a=this._containerRef;if(a){var r=h(a),i=document.elementFromPoint(t[0]+r.x,t[1]+r.y);return a===i||a.contains(i)}return!1},r.tileValues=function(t){var e=t.center,n=t.zoom,o=t.pixelDelta,a=t.zoomDelta,r=t.width,i=t.height,s=Math.round(n+(a||0)),l=n+(a||0)-s,u=Math.pow(2,l),h=r/u,c=i/u,m=p(e[1],s)-(o?o[0]/256/u:0),f=d(e[0],s)-(o?o[1]/256/u:0),v=h/2/256,g=c/2/256;return{tileMinX:Math.floor(m-v),tileMaxX:Math.floor(m+v),tileMinY:Math.floor(f-g),tileMaxY:Math.floor(f+g),tileCenterX:m,tileCenterY:f,roundedZoom:s,zoomDelta:a||0,scaleWidth:h,scaleHeight:c,scale:u}},r.renderTiles=function(){for(var t=this,e=this.state,n=e.oldTiles,a=e.width,r=e.height,i=this.props.dprs,s=this.props.provider||c,l=this.tileValues(this.state),u=l.tileMinX,h=l.tileMaxX,m=l.tileMinY,p=l.tileMaxY,d=l.tileCenterX,f=l.tileCenterY,v=l.roundedZoom,g=l.scaleWidth,_=l.scaleHeight,w=l.scale,M=[],x=0;x<n.length;x++){var T=n[x],b=T.roundedZoom-v;if(!(Math.abs(b)>4||0===b))for(var z=1/Math.pow(2,b),E=256*-(u-T.tileMinX*z),D=256*-(m-T.tileMinY*z),C=Math.max(T.tileMinX,0),y=Math.max(T.tileMinY,0),P=Math.min(T.tileMaxX,Math.pow(2,T.roundedZoom)-1),Z=Math.min(T.tileMaxY,Math.pow(2,T.roundedZoom)-1),L=C;L<=P;L++)for(var A=y;A<=Z;A++)M.push({key:L+"-"+A+"-"+T.roundedZoom,url:s(L,A,T.roundedZoom),srcSet:S(i,s,L,A,T.roundedZoom),left:E+256*(L-T.tileMinX)*z,top:D+256*(A-T.tileMinY)*z,width:256*z,height:256*z,active:!1})}for(var k=Math.max(u,0),W=Math.max(m,0),R=Math.min(h,Math.pow(2,v)-1),O=Math.min(p,Math.pow(2,v)-1),Y=k;Y<=R;Y++)for(var X=W;X<=O;X++)M.push({key:Y+"-"+X+"-"+v,url:s(Y,X,v),srcSet:S(i,s,Y,X,v),left:256*(Y-u),top:256*(X-m),width:256,height:256,active:!0});var F={width:g,height:_,position:"absolute",top:"calc((100% - "+r+"px) / 2)",left:"calc((100% - "+a+"px) / 2)",overflow:"hidden",willChange:"transform",transform:"scale("+w+", "+w+")",transformOrigin:"top left"},j=this.props.boxClassname||"pigeon-tiles-box",I={position:"absolute",width:256*(h-u+1),height:256*(p-m+1),willChange:"transform",transform:"translate("+-(256*(d-u)-g/2)+"px, "+-(256*(f-m)-_/2)+"px)"},N=this.props.tileComponent;return o.createElement("div",{style:F,className:j},o.createElement("div",{className:"pigeon-tiles",style:I},M.map(function(e){return o.createElement(N,{key:e.key,tile:e,tileLoaded:function(){return t.tileLoaded(e.key)}})})))},r.renderOverlays=function(){var t=this,e=this.state,n=e.width,a=e.height,r=e.center,i={bounds:this.getBounds(),zoom:this.zoomPlusDelta(),center:r,width:n,height:a},s=o.Children.map(this.props.children,function(e){if(!e)return null;if(!o.isValidElement(e))return e;var n=e.props,a=n.anchor,s=n.position,l=n.offset,u=t.latLngToPixel(a||s||r);return o.cloneElement(e,{left:u[0]-(l?l[0]:0),top:u[1]-(l?l[1]:0),latLngToPixel:t.latLngToPixel,pixelToLatLng:t.pixelToLatLng,setCenterZoom:t.setCenterZoomForChildren,mapProps:t.props,mapState:i})}),l={position:"absolute",width:n,height:a,top:"calc((100% - "+a+"px) / 2)",left:"calc((100% - "+n+"px) / 2)"};return o.createElement("div",{className:"pigeon-overlays",style:l},s)},r.renderAttribution=function(){var t=this.props,e=t.attribution,n=t.attributionPrefix;if(!1===e)return null;var a={color:"#0078A8",textDecoration:"none"};return o.createElement("div",{key:"attr",className:"pigeon-attribution",style:{position:"absolute",bottom:0,right:0,fontSize:"11px",padding:"2px 5px",background:"rgba(255, 255, 255, 0.7)",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",color:"#333"}},!1===n?null:o.createElement("span",null,n||o.createElement("a",{href:"https://pigeon-maps.js.org/",style:a,target:"_blank",rel:"noreferrer noopener"},"Pigeon")," | "),e||o.createElement("span",null," \xa9 ",o.createElement("a",{href:"https://www.openstreetmap.org/copyright",style:a,target:"_blank",rel:"noreferrer noopener"},"OpenStreetMap")," contributors"))},r.renderWarning=function(){var t=this.props,e=t.metaWheelZoom,n=t.metaWheelZoomWarning,a=t.twoFingerDrag,r=t.twoFingerDragWarning,i=t.warningZIndex,s=this.state,l=s.showWarning,u=s.warningType,h=s.width,c=s.height;if(e&&n||a&&r){var m={position:"absolute",top:0,left:0,width:h,height:c,overflow:"hidden",pointerEvents:"none",opacity:l?100:0,transition:"opacity 300ms",background:"rgba(0,0,0,0.5)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:22,fontFamily:'"Arial", sans-serif',textAlign:"center",zIndex:i},p="undefined"!==typeof window&&window.navigator&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"ctrl",d="fingers"===u?r:n;return o.createElement("div",{className:"pigeon-overlay-warning",style:m},d.replace("META",p))}return null},r.render=function(){var t=this.props,e=t.touchEvents,n=t.twoFingerDrag,a=this.state,r=a.width,i=a.height,s={width:this.props.width?r:"100%",height:this.props.height?i:"100%",position:"relative",display:"inline-block",overflow:"hidden",background:"#dddddd",touchAction:e?n?"pan-x pan-y":"none":"auto"},l=!(!r||!i);return o.createElement("div",{style:s,ref:this.setRef,dir:"ltr"},l&&this.renderTiles(),l&&this.renderOverlays(),l&&this.renderAttribution(),l&&this.renderWarning())},a}(o.Component);i(b,"defaultProps",{animate:!0,metaWheelZoom:!1,metaWheelZoomWarning:"Use META + wheel to zoom!",twoFingerDrag:!1,twoFingerDragWarning:"Use two fingers to move the map",zoomSnap:!0,mouseEvents:!0,touchEvents:!0,warningZIndex:100,animateMaxScreens:5,minZoom:1,maxZoom:18,limitBounds:"center",dprs:[],tileComponent:function(t){var e=t.tile,n=t.tileLoaded;return o.createElement("img",{src:e.url,srcSet:e.srcSet,width:e.width,height:e.height,loading:"lazy",onLoad:n,alt:"",style:{position:"absolute",left:e.left,top:e.top,willChange:"transform",transformOrigin:"top left",opacity:1}})}});var z={isDragging:!1,startX:void 0,startY:void 0,startLeft:void 0,startTop:void 0,deltaX:0,deltaY:0};function E(t){var e=(0,o.useRef)(),n=(0,o.useRef)(t),a=(0,o.useRef)(r({},z)),i=(0,o.useState)(z),s=i[0],l=i[1];n.current=t;var u=function(t){var e=r(r({},a.current),t);a.current=e,l(e)},h=t.mapProps,c=h.mouseEvents,m=h.touchEvents;(0,o.useEffect)(function(){var t=function(t){if(function(t,e){for(;t;){if(t===e)return!0;t=t.parentElement}return!1}(t.target,e.current)&&(t.preventDefault(),u({isDragging:!0,startX:("touches"in t?t.touches[0]:t).clientX,startY:("touches"in t?t.touches[0]:t).clientY,startLeft:n.current.left,startTop:n.current.top,deltaX:0,deltaY:0}),n.current.onDragStart)){var o=n.current,a=o.left,r=o.top,i=o.offset,s=o.pixelToLatLng;n.current.onDragMove(s([a+(i?i[0]:0),r+(i?i[1]:0)]))}},o=function(t){if(a.current.isDragging){t.preventDefault();var e=("touches"in t?t.touches[0]:t).clientX,o=("touches"in t?t.touches[0]:t).clientY,r=e-a.current.startX,i=o-a.current.startY;if(u({deltaX:r,deltaY:i}),n.current.onDragMove){var s=n.current,l=s.offset,h=s.pixelToLatLng,c=a.current,m=c.startLeft,p=c.startTop;n.current.onDragMove(h([m+r+(l?l[0]:0),p+i+(l?l[1]:0)]))}}},r=function(t){var e,o;if(a.current.isDragging){t.preventDefault();var r=n.current,i=r.offset,s=r.pixelToLatLng,l=a.current,h=l.deltaX,c=l.deltaY,m=l.startLeft,p=l.startTop;null===(e=(o=n.current).onDragEnd)||void 0===e||e.call(o,s([m+h+(i?i[0]:0),p+c+(i?i[1]:0)])),u({isDragging:!1,startX:void 0,startY:void 0,startLeft:void 0,startTop:void 0,deltaX:0,deltaY:0})}},i=function(t,e,n){return window.addEventListener(t,e,n)},s=function(t,e){return window.removeEventListener(t,e)};return c&&(i("mousedown",t),i("mousemove",o),i("mouseup",r)),m&&(i("touchstart",t,{passive:!1}),i("touchmove",o,{passive:!1}),i("touchend",r,{passive:!1})),function(){c&&(s("mousedown",t),s("mousemove",o),s("mouseup",r)),m&&(s("touchstart",t),s("touchmove",o),s("touchend",r))}},[c,m]);var p=t.left,d=t.top,f=t.className,v=t.style,g=s.deltaX,_=s.deltaY,w=s.startLeft,M=s.startTop,x=s.isDragging;return o.createElement("div",{style:r(r({cursor:x?"grabbing":"grab"},v||{}),{},{position:"absolute",transform:"translate("+(x?w+g:p)+"px, "+(x?M+_:d)+"px)"}),ref:e,className:"pigeon-drag-block"+(f?" "+f:"")},t.children)}},97185(t,e,n){function o(t,e,n,o){return void 0===o&&(o=1),"https://stamen-tiles.a.ssl.fastly.net/terrain/"+n+"/"+t+"/"+e+(o>=2?"@2x":"")+".jpg"}n.d(e,{U3:()=>o})}}]);
//# sourceMappingURL=9467.a58d380f.chunk.js.map