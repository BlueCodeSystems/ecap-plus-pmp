"use strict";(self.webpackChunklightence_admin=self.webpackChunklightence_admin||[]).push([[8478],{43286(e,n,t){t.d(n,{$x:()=>u,DO:()=>p});var a,i,r,d,s=t(57528),l=t(94574),o=t(62791),c=t(62058),h=t(64435);const u=(0,l.Ay)(h.A)(a||(a=(0,s.A)(["\n  & > .ant-space-item:last-of-type {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),p=((0,l.Ay)(c.A)(i||(i=(0,s.A)(["\n  font-size: 1.25rem;\n  color: #666;\n\n  @media only screen and (min-width: 768px) {\n    font-size: 1.5rem;\n  }\n"]))),l.Ay.button(r||(r=(0,s.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: #999;\n  font-size: 1rem;\n  margin-left: 0.5rem;\n  display: flex; /* Ensure it aligns properly with the input */\n  align-items: center;\n  height: 100%; /* Match the height of the input */\n  padding: 0; /* Remove extra padding */\n\n  &:hover {\n    color: #333;\n  }\n"]))),(0,l.Ay)(o.a.Search)(d||(d=(0,s.A)(["\n  border: 2px solid #c6d9eb;\n  border-radius: 1.5rem;\n  background: #ffffff;\n  padding: 0.5rem 1rem;\n  width: 100%; /* Default to 100% width for mobile devices */\n  max-width: 450px; /* Set a maximum width */\n  margin: 0 auto; /* Center horizontally */\n  box-shadow: none; /* Remove box shadow to avoid enlarging effect */\n  display: flex; /* Use flex to align items properly */\n\n  &:focus {\n    border-color: #a2b8d7;\n    outline: none;\n  }\n\n  .ant-input-prefix {\n    margin-right: 0.5rem;\n  }\n\n  .ant-input-group-addon {\n    display: none;\n  }\n\n  input {\n    height: auto;\n    padding: 0.5rem;\n    border: none;\n    outline: none;\n    background: transparent;\n    font-weight: bold;\n    font-size: 14px; /* Slightly increased font size for better readability */\n    color: #333;\n  }\n\n  .clear-button {\n    display: flex;\n    align-items: center;\n    margin-left: 0; /* Remove margin if not needed */\n  }\n\n  @media only screen and (min-width: 576px) {\n    width: 75%; /* Adjust width for small tablets */\n  }\n\n  @media only screen and (min-width: 768px) {\n    width: 50%; /* Adjust width for tablets */\n  }\n\n  @media only screen and (min-width: 992px) {\n    width: 450px; /* Use the fixed width for larger screens */\n  }\n"]))))},88478(e,n,t){t.d(n,{z:()=>R});var a,i=t(89379),r=t(57528),d=t(65043),s=t(19160),l=t(74684),o=t(49092),c=t(40854),h=t.n(c),u=t(89421),p=t(11645),f=t(25389),g=t(64124),m=t(47419),x=t(36497),y=t(64435),w=t(8387),v=t(35696),A=t(45907),C=t(62058),j=t(16854),b=t.n(j),S=t(43286),_=t(73216),I=t(94574),k=t(83722),H=t(70579);const{Text:D}=A.A,E={current:1,pageSize:100},L={calhiv:"C/ALHIV",hei:"HEI",cwlhiv:"C/WLHIV",agyw:"AGYW",csv:"C/SV",cfsw:"CFSW",abym:"ABYM",caahh:"CAAHH",caichh:"CAICHH",caich:"CAICH",calwd:"CALWD",caifhh:"CAIFHH",muc:"MUC",pbfw:"PBFW"},F={calhiv:"Children and Adolescents Living with HIV",hei:"HIV Exposed Infants",cwlhiv:"Children and Women Living with HIV",agyw:"Adolescent Girls and Young Women",csv:"Children Survivors of Violence",cfsw:"Children of Female Sex Workers",abym:"Adolescent Boys and Young Men",caahh:"Child/Adolescent in Aged Headed Household",caichh:"Child/Adolescent in Chronically Ill Headed Household",caich:"Child/Adolescent in Child Headed Household",calwd:"Child/Adolescent Living with Disability",caifhh:"Child/Adolescent in Female Headed Household",muc:"Malnourished Under 5 Children",pbfw:"Pregnant and Breastfeeding Women"},O={caahh:"child_adolescent_in_aged_headed_household",caichh:"child_adolescent_in_chronically_ill_headed_household",caich:"child_adolescent_in_child_headed_household",calwd:"child_adolescent_living_with_disability",caifhh:"child_adolescent_in_female_headed_household",muc:"under_5_malnourished",pbfw:"pbfw"},W=I.Ay.div(a||(a=(0,r.A)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]))),R=()=>{const[e,n]=(0,d.useState)([]),[t,a]=(0,d.useState)([]),[r,c]=(0,d.useState)([]),[A,j]=(0,d.useState)({data:[],pagination:E,loading:!1}),{t:I}=(0,o.B)(),[R,B]=(0,d.useState)(""),[z,P]=(0,d.useState)(!1),[T,U]=(0,d.useState)(null),V=(0,d.useRef)(null),Y=(0,_.Zp)(),[q,N]=(0,d.useState)(""),[M,K]=(0,d.useState)(""),[G,$]=(0,d.useState)(!1),[X,Z]=(0,d.useState)({}),[J,Q]=(0,d.useState)(""),[ee,ne]=(0,d.useState)(Object.keys(L).reduce((e,n)=>(0,i.A)((0,i.A)({},e),{},{[n]:"all"}),{}));(0,d.useEffect)(()=>{(async()=>{try{const e=await h().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});U(e.data.data)}catch(e){console.error("Error fetching user data:",e)}})()},[]);const[te,ae]=(0,d.useState)([{key:"reason",value:""}]);(0,d.useEffect)(()=>{(async()=>{if(T)try{P(!0);const e=await h().get("https://ecapplus.server.dqa.bluecodeltd.com/child/vcas-assessed-register/".concat(null===T||void 0===T?void 0:T.location));n(e.data.data),a(e.data.data)}catch(e){console.error("Error fetching VCAs data:",e)}finally{P(!1)}})()},[T]),(0,d.useEffect)(()=>{const n=R.toLowerCase(),t=e.filter(e=>{var t,a,i,r;const d=[e.homeaddress,e.facility,e.province,e.district,e.ward].filter(Boolean).join(" ").toLowerCase(),s=((null===(t=e.uid)||void 0===t?void 0:t.toLowerCase())||"").includes(n)||((null===(a=e.firstname)||void 0===a?void 0:a.toLowerCase())||"").includes(n)||((null===(i=e.lastname)||void 0===i?void 0:i.toLowerCase())||"").includes(n)||d.includes(n)||((null===(r=e.vca_gender)||void 0===r?void 0:r.toLowerCase())||"").includes(n),l=Object.entries(ee).every(n=>{let[t,a]=n;if("all"===a)return!0;let i=t;t in O&&(i=O[t]);const r=e[i];return null!==r&&("yes"===a?"1"===r||"true"===r:"0"===r||"false"===r)});return s&&l});c(t);const a=t.map((e,n)=>({key:n,unique_id:e.uid,name:"".concat(e.firstname," ").concat(e.lastname),gender:e.vca_gender,age:ie(e.birthdate),address:{homeaddress:e.homeaddress,facility:e.facility,province:e.province,district:e.district,ward:e.ward}}));j({data:a,pagination:E,loading:!1})},[R,e,ee]);const ie=e=>{if(!e)return 0;const n=[/^(\d{1,2})-(\d{1,2})-(\d{4})$/,/^(\d{4})-(\d{1,2})-(\d{1,2})$/,/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/];let t=null;for(const d of n){const a=e.match(d);if(a){t=d===n[0]?new Date(parseInt(a[3]),parseInt(a[2])-1,parseInt(a[1])):d===n[1]?new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3])):new Date(parseInt(a[3]),parseInt(a[1])-1,parseInt(a[2]));break}}if(!t||isNaN(t.getTime()))return console.warn("Invalid date format: ".concat(e)),0;const a=new Date;let i=a.getFullYear()-t.getFullYear();const r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&i--,i},re=(e,n,t)=>{n(),N(e[0]),K(t)},de=e=>({filterDropdown:n=>{let{setSelectedKeys:t,selectedKeys:a,confirm:r,clearFilters:d,close:s}=n;return(0,H.jsxs)("div",{style:{padding:8},children:[(0,H.jsx)(f.A,{ref:V,placeholder:"Search ".concat(e),value:a[0],onChange:n=>{t(n.target.value?[n.target.value]:[]),"address"===e?Q("Address"):"facility"===e?Q("Facility"):"province"===e?Q("Province"):"district"===e?Q("District"):"ward"===e&&Q("Ward")},onPressEnter:()=>re(a,r,e),style:{marginBottom:8,display:"block"}}),(0,H.jsxs)(y.A,{children:[(0,H.jsx)(u.A,{type:"primary",onClick:()=>{re(a,r,e),Z(n=>(0,i.A)((0,i.A)({},n),{},{[e]:a[0]||""}))},icon:(0,H.jsx)(C.A,{}),size:"small",style:{width:95},children:"Search"}),(0,H.jsx)(u.A,{type:"primary",size:"small",onClick:()=>{d&&(d(),N(""),K(""),Z(n=>{const t=(0,i.A)({},n);return delete t[e],t}),"address"===e&&Q(""),r({closeDropdown:!1}))},style:{width:110},children:"Reset Column"}),(0,H.jsx)(u.A,{type:"link",size:"small",onClick:s,children:"X"})]})]})},filterIcon:e=>(0,H.jsx)(C.A,{style:{color:e?"#1890ff":void 0}}),onFilter:(n,t)=>{const a=t[e];if("address"===e){return Object.values(t.address).filter(Boolean).join(" ").toLowerCase().includes(String(n).toLowerCase())}return"unique_id"===e||"gender"===e||"age"===e?!!a&&String(a).toLowerCase()===String(n).toLowerCase():!!a&&String(a).toLowerCase().includes(String(n).toLowerCase())},render:(n,t)=>{if("address"===e){const e=["Address: ".concat(t.address.homeaddress||""),"Facility: ".concat(t.address.facility||""),"Province: ".concat(t.address.province||""),"District: ".concat(t.address.district||""),"Ward: ".concat(t.address.ward||"")].filter(e=>!e.endsWith(": "));return(0,H.jsx)("div",{children:e.map((e,n)=>(0,H.jsx)("div",{children:e},n))})}return M===e?(0,H.jsx)(b(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[q],autoEscape:!0,textToHighlight:n?n.toString():""}):n}}),se=[(0,i.A)({title:I("Unique ID"),dataIndex:"unique_id",width:"10%"},de("unique_id")),(0,i.A)({title:I("Full Name"),dataIndex:"name",width:"15%"},de("name")),(0,i.A)({title:I("Gender"),dataIndex:"gender",width:"10%"},de("gender")),(0,i.A)({title:I("Age"),dataIndex:"age",width:"10%"},de("age")),(0,i.A)({title:I("Household Details"),dataIndex:"address",width:"35%"},de("address")),{title:I("Applied Filters & Search"),dataIndex:"appliedFilters",width:"20%",render:()=>{var e;const n=Object.entries(ee).filter(e=>{let[,n]=e;return"all"!==n}).map(e=>{let[n]=e;return L[n]}),t=(null===(e=te.find(e=>"reason"===e.key))||void 0===e?void 0:e.value)||"",a=Object.entries(X).filter(e=>{let[,n]=e;return""!==n}).map(e=>{let[n,t]=e;return"address"===n?"".concat(J,": ").concat(t):"".concat(n,": ").concat(t)}),i=[...n,...t?["Graduation: ".concat(t)]:[],...a];return(0,H.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:i.map(e=>(0,H.jsx)(w.A,{color:"cyan",children:e},e))})}},{title:I("Actions"),width:"10%",dataIndex:"",render:(n,t)=>(0,H.jsx)(l.S,{type:"primary",onClick:()=>(n=>{const t=e.find(e=>e.uid===n);Y("/profile/vca-profile/".concat(encodeURIComponent(n)),{state:{vca:t}})})(t.unique_id),children:I("View")})}];return(0,H.jsxs)("div",{children:[(0,H.jsxs)(m.A,{justify:"space-between",align:"middle",style:{marginBottom:"16px"},children:[(0,H.jsx)(p.A,{children:(0,H.jsx)(v.A,{title:I("You can search by Household ID, Caregiver Name, Caseworker Name, and other fields."),children:(0,H.jsx)(S.DO,{placeholder:I("Global Search"),value:R,onChange:e=>B(e.target.value),style:{marginRight:"16px"}})})}),(0,H.jsxs)(p.A,{span:24,children:[(0,H.jsx)("h5",{style:{fontSize:"20px",margin:"16px 16px 8px 0"},children:I("Filter by Sub Population")}),(0,H.jsx)(m.A,{align:"middle",style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:Object.entries(L).map(e=>{let[n,t]=e;return(0,H.jsxs)("div",{style:{marginRight:"16px",marginBottom:"1px",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,H.jsx)("span",{style:{fontSize:"12px"},children:t}),(0,H.jsxs)(x.A,{style:{width:"100px"},value:ee[n],onChange:e=>{return t=n,a=e,void ne(e=>(0,i.A)((0,i.A)({},e),{},{[t]:a}));var t,a},children:[(0,H.jsx)(x.A.Option,{value:"all",children:I("All")}),(0,H.jsx)(x.A.Option,{value:"yes",children:I("Yes")}),(0,H.jsx)(x.A.Option,{value:"no",children:I("No")})]})]},n)})})]}),(0,H.jsx)(p.A,{children:(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsx)(W,{children:(0,H.jsxs)(y.A,{children:[(0,H.jsx)(u.A,{type:"primary",onClick:()=>{B(""),N(""),K(""),ne(Object.keys(L).reduce((e,n)=>(0,i.A)((0,i.A)({},e),{},{[n]:"all"}),{})),ae([{key:"reason",value:""}]),Z({}),Q(""),c(t);const e=t.map((e,n)=>({key:n,unique_id:e.uid,name:"".concat(e.firstname," ").concat(e.lastname),gender:e.vca_gender,age:ie(e.birthdate),address:{homeaddress:e.homeaddress,facility:e.facility,province:e.province,district:e.district,ward:e.ward}}));j({data:e,pagination:E,loading:!1}),se.forEach(e=>{if("filterDropdown"in e&&e.filterDropdown){const n=e.filterDropdown;n.clearFilters&&n.clearFilters()}V.current&&V.current&&V.current.input&&(V.current.input.value="")})},children:I("Clear Filters")}),(0,H.jsx)(u.A,{type:"primary",onClick:()=>{try{const e=(new k.iX).parse(r),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(n),t.download="vca.csv",t.click()}catch(e){console.error("Error exporting data:",e)}},children:I("Export to CSV")})]})})})})]}),(0,H.jsx)(g.A,{title:"Filter Key Descriptions",open:G,onOk:()=>{$(!1)},onCancel:()=>{$(!1)},width:600,children:(0,H.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Object.entries(F).map(e=>{let[n,t]=e;return(0,H.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,H.jsxs)(D,{strong:!0,children:[L[n],":"]}),(0,H.jsx)("br",{}),(0,H.jsx)(D,{children:t})]},n)})})}),(0,H.jsx)(s.W,{columns:se,dataSource:A.data,pagination:A.pagination,loading:z,scroll:{x:1e3},style:{overflowX:"auto"}},r.length)]})}}}]);
//# sourceMappingURL=8478.e09d40a5.chunk.js.map