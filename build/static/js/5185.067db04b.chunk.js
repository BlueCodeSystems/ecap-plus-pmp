"use strict";(self.webpackChunklightence_admin=self.webpackChunklightence_admin||[]).push([[5185],{43286(e,n,t){t.d(n,{$x:()=>u,DO:()=>p});var a,i,r,o,l=t(57528),s=t(94574),d=t(62791),c=t(62058),h=t(64435);const u=(0,s.Ay)(h.A)(a||(a=(0,l.A)(["\n  & > .ant-space-item:last-of-type {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),p=((0,s.Ay)(c.A)(i||(i=(0,l.A)(["\n  font-size: 1.25rem;\n  color: #666;\n\n  @media only screen and (min-width: 768px) {\n    font-size: 1.5rem;\n  }\n"]))),s.Ay.button(r||(r=(0,l.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: #999;\n  font-size: 1rem;\n  margin-left: 0.5rem;\n  display: flex; /* Ensure it aligns properly with the input */\n  align-items: center;\n  height: 100%; /* Match the height of the input */\n  padding: 0; /* Remove extra padding */\n\n  &:hover {\n    color: #333;\n  }\n"]))),(0,s.Ay)(d.a.Search)(o||(o=(0,l.A)(["\n  border: 2px solid #c6d9eb;\n  border-radius: 1.5rem;\n  background: #ffffff;\n  padding: 0.5rem 1rem;\n  width: 100%; /* Default to 100% width for mobile devices */\n  max-width: 450px; /* Set a maximum width */\n  margin: 0 auto; /* Center horizontally */\n  box-shadow: none; /* Remove box shadow to avoid enlarging effect */\n  display: flex; /* Use flex to align items properly */\n\n  &:focus {\n    border-color: #a2b8d7;\n    outline: none;\n  }\n\n  .ant-input-prefix {\n    margin-right: 0.5rem;\n  }\n\n  .ant-input-group-addon {\n    display: none;\n  }\n\n  input {\n    height: auto;\n    padding: 0.5rem;\n    border: none;\n    outline: none;\n    background: transparent;\n    font-weight: bold;\n    font-size: 14px; /* Slightly increased font size for better readability */\n    color: #333;\n  }\n\n  .clear-button {\n    display: flex;\n    align-items: center;\n    margin-left: 0; /* Remove margin if not needed */\n  }\n\n  @media only screen and (min-width: 576px) {\n    width: 75%; /* Adjust width for small tablets */\n  }\n\n  @media only screen and (min-width: 768px) {\n    width: 50%; /* Adjust width for tablets */\n  }\n\n  @media only screen and (min-width: 992px) {\n    width: 450px; /* Use the fixed width for larger screens */\n  }\n"]))))},75185(e,n,t){t.r(n),t.d(n,{default:()=>I});var a,i=t(65043),r=t(45907),o=t(30460),l=t(8387),s=t(40854),d=t.n(s),c=t(89379),h=t(57528),u=t(19160),p=t(74684),x=t(49092),g=t(64435),m=t(73216),f=t(25389),v=t(89421),A=t(47419),y=t(11645),w=t(35696),j=t(36497),_=t(62058),S=t(16854),b=t.n(S),C=t(94574),k=t(43286),E=t(83722),O=t(70579);const R={current:1,pageSize:100},L={calhiv:"all",hei:"all",cwlhiv:"all",agyw:"all",csv:"all",cfsw:"all",abym:"all"},T=C.Ay.div(a||(a=(0,h.A)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 16px;\n"]))),D=()=>{var e;const[n,t]=(0,i.useState)([]),[a,r]=(0,i.useState)([]),[o,s]=(0,i.useState)({data:[],pagination:R,loading:!1}),{t:h}=(0,x.B)(),[S,C]=(0,i.useState)(""),[D,I]=(0,i.useState)(null),F=(0,m.Zp)(),W=(0,i.useRef)(null),[z,P]=(0,i.useState)(""),[H,N]=(0,i.useState)(""),[B,U]=(0,i.useState)(L),[V,K]=(0,i.useState)({}),[G,M]=(0,i.useState)([{key:"de_registration_reason",value:""}]),Y={calhiv:"CALHIV",hei:"HEI",cwlhiv:"CWLHIV",agyw:"AGYW",csv:"C/SV",cfsw:"CFSW",abym:"ABYM"};(0,i.useEffect)(()=>{(async()=>{try{const e=await d().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});I(e.data.data)}catch(e){console.error("Error fetching user data:",e)}})()},[]),(0,i.useEffect)(()=>{(async()=>{if(D)try{var e;s(e=>(0,c.A)((0,c.A)({},e),{},{loading:!0}));const n=(null===(e=G.find(e=>"de_registration_reason"===e.key))||void 0===e?void 0:e.value)||"",a=await d().get("https://ecapplus.server.dqa.bluecodeltd.com/household/all-households-archived/".concat(null===D||void 0===D?void 0:D.location),{params:{de_registration_reason:n}});t(a.data.data),r(a.data.data),console.log("Fetched households with filter:",a.data.data)}catch(n){console.error("Error fetching households data:",n)}finally{s(e=>(0,c.A)((0,c.A)({},e),{},{loading:!1}))}})()},[D,G]);const X=(e,n,t)=>{n(),P(e[0]),N(t)},q=e=>({filterDropdown:n=>{let{setSelectedKeys:t,selectedKeys:a,confirm:i,clearFilters:r,close:o}=n;return(0,O.jsxs)("div",{style:{padding:8},children:[(0,O.jsx)(f.A,{ref:W,placeholder:"Search ".concat(e),value:a[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>{X(a,i,e),K(n=>(0,c.A)((0,c.A)({},n),{},{[e]:a[0]||""}))},style:{marginBottom:8,display:"block"}}),(0,O.jsxs)(g.A,{children:[(0,O.jsx)(v.A,{type:"primary",onClick:()=>{X(a,i,e),K(n=>(0,c.A)((0,c.A)({},n),{},{[e]:a[0]||""}))},icon:(0,O.jsx)(_.A,{}),size:"small",style:{width:95},children:"Search"}),(0,O.jsx)(v.A,{type:"primary",size:"small",onClick:()=>{r&&((e=>{e(),P("")})(r),P(""),N(""),K(n=>{const t=(0,c.A)({},n);return delete t[e],t}),i({closeDropdown:!1}))},style:{width:130},children:"Reset column"}),(0,O.jsx)(v.A,{type:"link",size:"small",onClick:o,children:"X"})]})]})},filterIcon:e=>(0,O.jsx)(_.A,{style:{color:e?"#1890ff":void 0}}),onFilter:(n,t)=>{const a=t[e];return!!a&&a.toString().toLowerCase().includes(n.toString().toLowerCase())},onFilterDropdownVisibleChange:e=>{e&&setTimeout(()=>{var e;return null===(e=W.current)||void 0===e?void 0:e.select()},100)},render:n=>H===e?(0,O.jsx)(b(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[z],autoEscape:!0,textToHighlight:n||""}):n}),Z=[(0,c.A)({title:h("Household ID"),dataIndex:"household_id",width:"15%"},q("household_id")),(0,c.A)({title:h("Caregiver Name"),dataIndex:"name",width:"15%"},q("name")),(0,c.A)((0,c.A)({title:h("Household Details"),dataIndex:"address",width:"30%"},q("address")),{},{render:e=>(0,O.jsx)("div",{style:{whiteSpace:"pre-line"},children:e})}),(0,c.A)({title:h("Case Worker"),dataIndex:"caseworker_name",width:"15%"},q("caseworker_name")),{title:h("Applied Filters & Search"),dataIndex:"appliedFilters",width:"20%",render:()=>{var e;const n=Object.entries(B).filter(e=>{let[,n]=e;return"all"!==n}).map(e=>{let[n]=e;return Y[n]}),t=(null===(e=G.find(e=>"de_registration_reason"===e.key))||void 0===e?void 0:e.value)||"",a=Object.entries(V).filter(e=>{let[,n]=e;return""!==n}).map(e=>{let[n,t]=e;return"".concat(t)}),i=[...n,...t?["Graduation: ".concat(t)]:[],...a];return(0,O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:i.map(e=>(0,O.jsx)(l.A,{color:"cyan",children:e},e))})}},{title:h("Actions"),width:"10%",dataIndex:"",render:(e,n)=>(0,O.jsx)(g.A,{children:(0,O.jsx)(p.S,{type:"primary",onClick:()=>$(n.household_id),children:h("View")})})}];(0,i.useEffect)(()=>{var e;const t=S.toLowerCase(),a=(null===(e=G.find(e=>"de_registration_reason"===e.key))||void 0===e?void 0:e.value)||"",i=n.filter(e=>{var n,i,r,o,l;const s=((null===(n=e.household_id)||void 0===n?void 0:n.toLowerCase())||"").includes(t)||((null===(i=e.caregiver_name)||void 0===i?void 0:i.toLowerCase())||"").includes(t)||((null===(r=e.homeaddress)||void 0===r?void 0:r.toLowerCase())||"").includes(t)||((null===(o=e.ward)||void 0===o?void 0:o.toLowerCase())||"").includes(t)||((null===(l=e.caseworker_name)||void 0===l?void 0:l.toLowerCase())||"").includes(t),d=""===a||e.de_registration_reason===a;return s&&d});r(i)},[S,z,H,n,G]),(0,i.useEffect)(()=>{const e=a.map((e,n)=>({key:n,name:e.caregiver_name,age:0,address:"\n        Address: ".concat(e.homeaddress||"Not Applicable","\n        Facility: ").concat(e.facility||"Not Applicable","\n        Province: ").concat(e.province||"Not Applicable","\n        District: ").concat(e.district||"Not Applicable","\n        Ward: ").concat(e.ward||"Not Applicable","\n      "),household_id:e.household_id,caseworker_name:e.caseworker_name}));s({data:e,pagination:R,loading:!1})},[a]);const $=e=>{const t=n.find(n=>n.household_id===e);F("/profile/household-profile/".concat(encodeURIComponent(e)),{state:{household:t}})};return(0,O.jsxs)("div",{children:[(0,O.jsxs)(A.A,{justify:"space-between",align:"middle",style:{marginBottom:"16px"},children:[(0,O.jsx)(y.A,{children:(0,O.jsx)(w.A,{title:h("You can search by Household ID, Caregiver Name, Caseworker Name, and other fields."),children:(0,O.jsx)(k.DO,{placeholder:h("Global Search"),value:S,onChange:e=>C(e.target.value),style:{marginRight:"16px"}})})}),(0,O.jsxs)(y.A,{span:24,children:[(0,O.jsx)("h5",{style:{fontSize:"20px",margin:"16px 16px 8px 0"},children:h("Filter by Sub Population")}),(0,O.jsxs)(A.A,{align:"middle",style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:[Object.entries(Y).map(e=>{let[n,t]=e;return(0,O.jsxs)("div",{style:{marginRight:"16px",marginBottom:"1px",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,O.jsx)("span",{style:{fontSize:"12px"},children:t}),(0,O.jsxs)(j.A,{style:{width:"100px"},value:B[n],onChange:e=>{return t=n,a=e,void U(e=>(0,c.A)((0,c.A)({},e),{},{[t]:a}));var t,a},children:[(0,O.jsx)(j.A.Option,{value:"all",children:h("All")}),(0,O.jsx)(j.A.Option,{value:"yes",children:h("Yes")}),(0,O.jsx)(j.A.Option,{value:"no",children:h("No")})]})]},n)}),(0,O.jsx)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"flex-start"},children:(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,O.jsxs)("span",{style:{fontSize:"12px",paddingBottom:"0px"},children:[h("Filter by Graduation")," ",(0,O.jsx)(l.A,{color:"cyan",children:"New"})]}),(0,O.jsx)("span",{children:(0,O.jsxs)(j.A,{style:{width:300,marginLeft:1},value:Array.isArray(G)&&(null===(e=G.find(e=>"de_registration_reason"===e.key))||void 0===e?void 0:e.value)||void 0,onChange:e=>((e,n)=>{M(t=>t.map(t=>t.key===e?(0,c.A)((0,c.A)({},t),{},{value:n}):t))})("de_registration_reason",e),placeholder:"Select Option",dropdownRender:e=>(0,O.jsx)("div",{style:{fontWeight:"normal"},children:e}),children:[(0,O.jsxs)(j.A.Option,{value:"Graduated (Household has met the graduation benchmarks in ALL domains)",children:[" ","Met ALL graduation benchmarks"," "]}),(0,O.jsx)(j.A.Option,{value:"Exited without graduation",children:" Exited without graduation "}),(0,O.jsxs)(j.A.Option,{value:"Transferred to other OVC program",children:[" ","Transferred to other OVC program"," "]}),(0,O.jsx)(j.A.Option,{value:"Lost to follow-up",children:" Lost to follow - up "}),(0,O.jsx)(j.A.Option,{value:"Passed on",children:" Passed on "}),(0,O.jsx)(j.A.Option,{value:"Aging without transition plan",children:" Aging without transition plan "}),(0,O.jsx)(j.A.Option,{value:"Moved (Relocated)",children:" Moved(Relocated) "}),(0,O.jsx)(j.A.Option,{value:"Other",children:" Other "})]})})]})})]})]}),(0,O.jsx)(y.A,{style:{marginTop:"16px"},children:(0,O.jsx)(T,{children:(0,O.jsxs)(g.A,{children:[(0,O.jsx)(v.A,{type:"primary",onClick:()=>{P(""),C(""),N(""),U(L),M([{key:"de_registration_reason",value:""}])},children:h("Clear Filters")}),(0,O.jsx)(v.A,{type:"primary",onClick:()=>{try{const e=(new E.iX).parse(a),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(n),t.download="households_data.csv",t.click()}catch(e){console.error("Error exporting data:",e)}},children:h("Export to CSV")})]})})})]}),(0,O.jsx)(u.W,{columns:Z,dataSource:o.data,pagination:o.pagination,loading:o.loading,scroll:{x:1e3},style:{overflowX:"auto"},onChange:e=>{s(n=>(0,c.A)((0,c.A)({},n),{},{pagination:e}))}})]})},I=()=>{const[e,n]=(0,i.useState)(null),[t,a]=(0,i.useState)(!0),[s,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{a(!0),await new Promise(e=>setTimeout(e,5e3));const e=await d().get("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,"/users/me"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});n(e.data.data)}catch(e){console.error("Error fetching user data:",e)}finally{a(!1),c(!1)}})()},[]);const h=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(r.A.Title,{level:4,children:[" ",t?(0,O.jsx)(o.A.Input,{active:!0,size:"small"}):"".concat(null===e||void 0===e?void 0:e.location)," District Archived Households Register"]}),(0,O.jsx)(l.A,{color:"volcano",children:"Note: Only deregistered caregivers are shown."}),(0,O.jsx)("br",{}),(0,O.jsx)("br",{})]});return(0,O.jsxs)(O.Fragment,{children:[h,s?(0,O.jsx)(o.A,{active:!0,paragraph:{rows:2}}):(0,O.jsx)(D,{})]})}}}]);
//# sourceMappingURL=5185.067db04b.chunk.js.map